<!DOCTYPE html>
<html>

<head>
    <!-- the next three lines try to discourage browser from keeping page in cache -->
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="-1">
    <meta http-equiv="cache-control" content="no-store">
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">
    <title id="title">  A Coder's Game </title>
</head>

<script src="animations.js" type="module"></script>
<link href="style.css" type="text/css" rel="stylesheet" />

<body style="background-color: rgb(226, 113, 147);">
    <h1 id= "header"> A Coder's Game </h1>
    <button id= "play">Start!</button>
    <p1 id= "time">Points: 0</p1>
    <p1 id= "health">Health:</p1>
    <div id= "progress">
    </div>
    <div id= "bar"></div>
    

    <canvas id="canvas"></canvas>

    <script type="module">
    import { update, enemyInit, moveObject, stopMoveObject } from "./animations.js"; 
        var gameStart = false;
        var seconds = 0;
        
        var soundtrack = document.createElement("AUDIO");
        soundtrack.src = "soundtrack.mp3";
        soundtrack.loop = true;
        soundtrack.volume = 0.5;
        
      

        // Update the canvas every 10 milliseconds.
        var interval = setInterval(update(gameStart), 10);

        // Button functions:
        var play = document.getElementById("play");
        var title = document.getElementById("header");
        play.addEventListener('click', function() { title.style.display = "none";
                                                    play.style.display = "none";
                                                    startGame(); });


        // Called when the start button is pressed.
        function startGame() {
        // Respond to different keyboard presses.
        window.addEventListener('keydown', moveObject, false);
        window.addEventListener('keyup', stopMoveObject, false);

        // The amount of time that the user has survived.
        var clock = setInterval(function() { var points = document.getElementById("time");
                                             seconds++;
                                             points.innerHTML = "Points:      " + seconds;
                                           }, 1000);

        // Add an enemy every 20 seconds.
        var enemyClock = setInterval(enemyInit, 20000);
        soundtrack.play();
        console.log(soundtrack.duration);

        gameStart = true;
        clearInterval(interval);
        setInterval(update(gameStart), 10);
        }  
    </script>

</body>

</html>